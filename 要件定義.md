## 目的

本ドキュメントはピーマン収穫機を操作するアプリケーションの要件定義書

## 概要


### ターゲット
すでに農業を始めていて機械導入の経験を持っている人

### システム方式・構成

システム構成は次の通りです。なお、新たなハードウェア導入は予定していません。

データ量

IDデータ：（IDは量産すると必要になる）

日付：
湿度データ：
気温データ：
重量データ：
状態データ：
1枚当たりの画像サイズ：約4496kバイト

データベースサーバー
収穫情報を年単位で保存しておくデータベースです。
通信方法については
以下を参考に通信頻度の観点からWebSocketを採用する。
https://penpen-dev.com/blog/realtime-commu/

例：
アプリケーションサーバー
自動連携設定を行う画面、連携結果をK表示する画面を提供します。
データベースサーバー
収穫情報を年単位で保存しておくデータベースです。
経理システム
現在経理部で使われている経理システムおよび専用のワークステーションです。
### 用語定義

例：
経理システム
社内で用いている経理システム○○のことを指します。
社内システム
社内で用いられている共通システムを指します。
バッチ
定期的に自動実行されるシステムを指します。
ログ
ここではバッチシステムによって出力される処理結果を指します。
## 業務要件

<!-- ### 構築後のフロー

システム構築後、フローは次のようになります。

経理担当者が専用画面にて自動取り込みに関して設定
バッチシステムが自動処理後、経理担当者にメールで完了を通知
経理担当者が経理システムへログイン
取り込み未確定データを確認後、経理システムにて確定処理を実行 -->
### 利用者一覧

ピーマン収穫機を利用いただいている農家
### 規模

1人月（エンジニア1人）の予定です。

## 機能要件

###データ

コントロール設定画面
機械接続画面
グラフ出力画面


例：
バッチ処理設定画面
バッチの有効または無効、頻度、処理完了後に送信するメールアドレスを設定する画面です。
バッチ処理結果一覧画面
バッチ処の履歴一覧を確認する画面です。
バッチ処理結果詳細画面
ある時に行われたバッチ処理の結果を確認する画面です。
### 権限

バッチ処理設定は経理担当者のみ可能とします。
バッチ処理結果は経理担当者および経理システム担当者のみ閲覧可能とします。
### 帳票

本システムでは以下のメールおよび帳票が出力されます。

バッチ処理結果メール
バッチ処理結果詳細レポート
### 情報・データ

本システムでは以下のデータが作成されます。



例：経理システムに取り込める形での売り上げデータのエクスポートデータ
　CSVデータで一時出力されます。処理後、削除されます。
　経理システムへのインポートログデータ
　経理システムへのインポート処理に関する詳細なログデータがデータベースに保存されます。
　経理システムへの未確定インポートデータ
　経理システムへは未確定データとしてインポートされます。その内容を経理担当者が確認後、　取り込み処理を確定します。
### 外部インタフェース

専用のピーマン収穫機。
例：
メール
経理担当者へのバッチ処理完了を通知します。
Slack
バッチ処理が失敗した時にシステム管理者グループへ通知されます。
CSV処理
経理システムへ接続してAPIを通じてインポート処理を実行します。
### データフロー

本システムのデータ処理は次のようになります。

バッチシステムが売り上げマスターより対象となるデータを抽出
バッチシステムが抽出したデータを経理システムへ取り込めるように加工
バッチシステムが経理システムへ接続
バッチシステムが経理システムへデータを送出
バッチシステムがログをログテーブルに記述
バッチシステムが経理担当者へバッチ処理完了のメールを送信
バッチシステムが対象の売り上げマスターデータへインポート完了のフラグ立て
## 非機能要件

### 互換性

過去システムとの互換性は維持されます。なお経理システムのバージョンは12.0.0を対象としています。マイナーアップデートは問題ないと思われますが、メジャーアップデートのタイミングでAPIが変更される可能性はあります。

### スケジュール

| 日付 | 内容 |
|------|------|
| 2022年12月05日まで | 要件確認 |
| 2023年01月05日まで | 開発 |
| 2023年01月10日まで | テスト |
| 2023年01月15日まで | テスト結果に伴う調整 |
| 2023年01月20日まで | 再度テスト |
| 2023年01月20日まで | 開発完了およびデプロイ |

### 予算

機械開発費：5万円
データベース運用費：